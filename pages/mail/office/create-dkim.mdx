# Creating a DKIM for Office365

## Install OpenDKIM
```bash
apt install opendkim-tools
```

## Generate Selectors
```bash
opendkim-genkey -D /root -d <domain> -s selector1
opendkim-genkey -D /root -d <domain> -s selector2
```
Then view the DNS record by running:
```bash
cat /root/selector1.txt
cat /root/selector2.txt
```

## Adding the DKIM to DNS
1) Go to your DNS Provider's Portal
2) Click "Add Record" on the DNS page
3) Select a `TXT-Record`
4) Set the name as `selector1._domainkey`
5) Set the value as the DKIM selector value from the `/root/selector1.txt`, it should look similar to:
```sql
"v=DKIM1; h=sha256; k=rsa; "p=XXXXXXXXXXXXXXXXXXXXXXXXXXXX"
```
6) Click "Save"
7) Do the same for `selector2`

## Adding the private key on Office365
1) Visit the [Office365 Admin Portal](https://security.microsoft.com/dkimv2)
2) Click the domain that you are adding the DKIM to
3) Change the "Sign messages for this domain with DKIM signatures" toggle to "Enabled"
4) Upload the private keys from the `selector1.private` and `selector2.private` files to Office365
